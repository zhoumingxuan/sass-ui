## SassUI / Next.js + Tailwind v4

该项目基于 Next.js（App Router）与 Tailwind CSS v4，提供面向后台场景的 React 组件与页面框架。

## 统一设计概念（落地）

以下为基于现有实现可直接执行的设计规范，聚焦“为什么这么做”和“怎么落地”，不罗列控件清单。

### 设计目标与痛点
- 一致性：所有尺寸、颜色、阴影从 Token 出发，避免写死像素；减少同类控件在不同页面的视觉漂移。
- 反馈明确：聚焦环、悬停/按下的层级与颜色变化清晰、禁用态彻底熄灭微交互。
- 稳定无抖动：滚动条样式与布局预留避免出现/消失引起跳动；浮层锚定源元素且可点击外部关闭。
- 可访问：键盘优先、语义化角色/状态、屏幕阅读器可读。

### 栅格与密度
- 8px 基准：所有间距、圆角、阴影扩散半径遵循 8 的倍数；组件之间“ 8/16/24 ”的节奏。
- 关键尺寸：Header 40px，Sidebar 224px，Modal 400px，输入类高度 40px（h-10）。
- 表格密度：compact h-40px / cozy h-48px / comfortable h-56px；密度切换联动单元格内边距与字号。

### 色彩与层次
- 语义色：primary、success、warning、error、info 用于强调与状态提示；默认内容色倾向中性灰阶。
- 导航域：独立 nav 调色板（nav/nav-deep/nav-hover/nav-body 等），与内容域分离，保证可读与层次。
- 阴影刻度：shadow-elevation-1/2/3 对应轻/中/重；用于 Header、侧栏、弹框等不同层级。
- 边框与圆角：默认 border-gray-200 + rounded-lg，强调干净、易分区的后台风格。

### 表单输入设计（输入框/选择器通用）
- 结构：上方 label（fieldLabel），下方辅助文案（helperText），中间为输入域（inputBase）。
- 输入底座 inputBase：统一高度 h-10，白底、灰边、圆角、聚焦时使用 focus-visible:ring-2 + 语义色；禁用态降低不透明度与交互。
- 前后缀：prefix/suffix 以内边距（如 pl-8/pr-8）让位，不改变核心视觉节奏。
- 清空：支持 clearable；清空后触发 onChange 并产出空值或 undefined，方便表单统一处理。
- 受控/非受控：有 value 即受控，反之由组件内部状态兜底；事件始终透传给外层。
- 错误/警告：错误/警告态应切换到对应语义色的边框/环（建议：error ring、warning ring），文案位置沿用 helperText。

### 选择与多选（单选/多选/开关/滑块）
- 单选/多选：行距与字号与页面密度一致；组标题用 fieldLabel；禁用项降低对比度并禁用悬停反馈。
- 开关 Switch：small/medium/large 三档；ON 态使用主色，OFF 态保持中性灰；拇指位移与轨道颜色同步变化。
- 滑块 Slider：轨道 h-2，填充段使用品牌色渐变；数值可选右侧展示，避免频繁回读。

### 日期与区间
- 直输 + 面板：输入框接受 yyyy-mm-dd；面板支持年/月/日切换与区间悬停高亮。
- 约束：支持 min/max 与 disabledDate；任何非法输入不会提交到外层状态。
- 快捷：今天、近 7 天、本月等快速操作；区间选择“先起后止”，并在跨越时自动调序。

### 弹框（Modal）
- 尺寸：默认宽度 400px（spacing.modal），圆角与阴影使用最高级别 elevation-3，保证前景优势。
- 遮罩：半透明黑背景；点击遮罩或右上角关闭按钮关闭；进入/离开短动画，避免突兀。
- 可达性：初始焦点落在首个可交互元素；ESC 关闭（建议增强）。

### 轻提示（Message）
- 类型：info/success/warning/error/loading；默认 3s 自动消失，loading 默认不自动关闭。
- 位置：top-center/top-right/top-left；点击气泡或显式 close 均可关闭。
- 配置：全局 config 可设定默认时长与位置；同类型多条按时间顺序堆叠，不遮挡核心交互区。

### 信息提示分级与样式（错误/主要/次要/弱提示）
- 错误（Critical/Error）：阻断或必须处理的信息。页面内用 Alert error（高对比度色、左侧强调条）；表单内就近显示错误文案（helperText 位置）并切换 `ring-error`；Toast 仅用于非阻断错误且建议“可重试/详情”动作。
- 主要信息（Primary/Important）：与当前任务强相关且需要引导注意。使用 `primary` 语义色、配图标，位置靠近相关区域顶端；可使用 Alert info 或顶部条幅，默认可关闭但不自动消失。
- 次要信息（Secondary/Tip）：增强理解的提示或推荐。中性灰或 `info` 低饱和背景；在控件下方（helperText）或区块顶部轻量展示，允许自动消失的 Toast。
- 弱提示（Tertiary/Hint）：不影响任务的轻提示或占位说明。采用灰阶文字，无背景块；尽量靠近触发点，避免干扰视线。
- 行为规范：阻断信息不要自动消失；非阻断信息默认 3s；所有提示提供明确动作（关闭、重试、跳转）或让用户可快速回到任务主线。

### 交互关系与状态（用户操作场景）
- 悬停/聚焦/按下：统一 `hover` 提升层次、`focus-visible` 显式环、`active` 回弹；禁用态移除所有微交互并降低不透明度。
- 表单验证：以“touched + invalid”为显示条件；优先就近提示并联动环/边框语义色；提交失败时再提供页级聚合错误提示。
- 加载与提交：按钮/输入使用 `loading`/骨架占位；短任务使用 Spinner，列表/表格使用 Skeleton；重要动作可采用“乐观更新+失败回滚”。
- 危险与不可逆：删除/重置等需二次确认（Modal），首要按钮使用危险色，默认聚焦在“取消”。
- 可撤销：非关键破坏操作优先使用“Toast + 撤销”而非二次确认，降低阻断成本。
- 搜索与筛选：输入防抖（300ms 左右），保持输入焦点与上下文，减少视觉噪音。

### 超级搜索交互规范（参考）
- 模式：支持实体搜索与字段筛选两种模式；可选多组筛选（设上限），超限时轻量提示不打断输入。
- 键鼠一致：方向键在分区与结果间切换，Enter 选中；Hover 不抢焦点但同步预览区内容。
- 预览与布局：右侧/底部预览按可用空间自适应；多分区命中时按 `minWidth` 估算下拉宽度，避免拥挤。
- 选择语义：分区可配置单/多选；已选项以 Chip 呈现并可直接移除；支持“在下方展示已选”。
- 记忆与建议：本地历史基于 `cache_key` 存储，最近项优先；Hints 在空输入时展示，帮助引导。
- 关闭策略：外击关闭；Esc 关闭并保留输入；提交后添加到历史（去重）。

### 表格（数据密集型场景）
- 密度：三档密度联动高度/内边距/字号；默认 cozy。
- 结构：吸顶表头、列最小宽度与对齐（左/右），支持排序图标三态；标题区支持搜索（输入防抖）。
- 状态：加载态骨架占位（最多 5 行），空态中性提示；行悬停高亮与斑马纹提升可扫描性。
- 分页：页码 + 每页条数；总数展示与标题联动，便于快速浏览规模。

### 导航与布局
- 侧栏：路由匹配自动展开父项；缩进、图标、文本在 nav 调色板下具有足够对比度；滚动条弱化且不引起布局跳动。
- 顶部：固定 40px 高度，渐变/玻璃化背景与内容域拉开层级；右侧可嵌入快速搜索。
- 内容域：最大宽度约束，避免超宽导致阅读压力；全局滚动条样式与侧栏分离。

### 浮层与遮罩（Select/日期等）
- 锚定：浮层锚定触发元素（anchor），随窗口变化保持可见；点击外部关闭。
- 触达：浮层内元素具备键盘可达性，Hover/Active/Selected 三态清晰；在范围选择时渲染悬停区间提示。

### 可访问性（A11y）
- 角色：toast 使用 role="status"; 下拉使用 role=listbox/option 并维护 aria-selected/disabled；导航使用 aria-current。
- 焦点：保留 focus-visible 样式；禁用态移除不必要的 ring 与阴影。
- 文案：图标仅装饰时加 aria-hidden；具有语义的按钮提供 aria-label。

### 扩展约定（给开发者）
- Token 优先：颜色/阴影/尺寸从 tailwind.config.ts 取值；不要写死像素与色值。
- 变体优先：通过 props 暴露 size/variant/appearance 等维度；减少外层覆盖导致的不一致。
- 受控/非受控：沿用现有模式；新增输入件需同时支持两种方式并保持 onChange 语义明确（空值/undefined）。
- 一致出厂：提供合理默认样式；保留 className 透传，允许按需增强但不破坏基线。

### 技术栈与版本
- Next.js App Router、React 18、TypeScript。
- Tailwind CSS v4（@import "tailwindcss" + @config 约定）。
- 图标：lucide-react。
